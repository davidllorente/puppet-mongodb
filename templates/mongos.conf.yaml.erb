# !!! generated by puppet !!!
# mongos.conf - YAML Syntax

systemLog:
   destination: file
   path: <%= scope.lookupvar('mongodb::logdir') %>/mongos_<%= @mongos_instance %>.log
   logAppend: <%= @mongos_logappend %>

processManagement:
   fork: <%= @mongos_fork %>
   pidFilePath: <%= scope.lookupvar('mongodb::pidfilepath') %>/mongos_<%= @mongos_instance %>/mongod.pid

net:
   port: <%= @mongos_port %>
<%- if @mongos_bind_ip != "" -%>
   bindIp: <%= @mongos_bind_ip %>
<%- end -%>

security:
<%- if @mongos_useauth != false -%>
   keyFile: /etc/mongos_<%= @mongos_instance %>.key
   clusterAuthMode: keyFile
   authorization: enabled
<% else -%>
   authorization: disabled
<%- end -%>

storage:
   dbPath: <%= scope.lookupvar('mongodb::dbdir') %>/mongos_<%= @mongos_instance %>
   engine: <%= @mongos_engine %>

<%- if @mongos_configServers != "" -%>
sharding:
   configDB: <%= @mongos_configServers %>
<%- end -%>

<%- if !@mongos_add_options.empty? -%>
setParameter:
<%- @mongos_add_options.sort_by{|key, value| key}.each do |key,value| -%>
  <%= key %>: <%= value %>
<%- end -%>
<%- end -%>

